name: Secret Repository Workflow

on: 
  push:
    branches:
      - main
  pull_request:
  workflow_dispatch:  # Allows manual trigger from GitHub Actions UI

jobs: # the actions this has to do
  check_the_env:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up environment variables
        run: |
          echo "API_KEY=${{ secrets.API_KEY }}" >> $GITHUB_ENV
          echo "SEARCH_API_KEY=${{ secrets.SEARCH_API_KEY }}" >> $GITHUB_ENV
          echo "SEARCH_ENGINE_ID=${{ secrets.SEARCH_ENGINE_ID }}" >> $GITHUB_ENV

      - name: Run application
        run: |
          echo "ğŸ” API_KEY starts with: ${API_KEY:0:5}******"
          echo "ğŸ” SEARCH_API_KEY starts with: ${SEARCH_API_KEY:0:5}******"
          echo "ğŸ” SEARCH_ENGINE_ID starts with: ${SEARCH_ENGINE_ID:0:5}******"